<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>代码管理和发布 | XFE DOCUMENT</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="西山居前端开发文档">
    
    <link rel="preload" href="/xfe-document/assets/css/0.styles.c01db112.css" as="style"><link rel="preload" href="/xfe-document/assets/js/app.bdf91f9c.js" as="script"><link rel="preload" href="/xfe-document/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/xfe-document/assets/js/1.7f771cfb.js" as="script"><link rel="preload" href="/xfe-document/assets/js/51.ae867302.js" as="script"><link rel="prefetch" href="/xfe-document/assets/js/10.23a1f579.js"><link rel="prefetch" href="/xfe-document/assets/js/11.c389195a.js"><link rel="prefetch" href="/xfe-document/assets/js/12.1d996921.js"><link rel="prefetch" href="/xfe-document/assets/js/13.4d4410c4.js"><link rel="prefetch" href="/xfe-document/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/xfe-document/assets/js/15.5542c093.js"><link rel="prefetch" href="/xfe-document/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/xfe-document/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/xfe-document/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/xfe-document/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/xfe-document/assets/js/20.c11ec329.js"><link rel="prefetch" href="/xfe-document/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/xfe-document/assets/js/22.46be512e.js"><link rel="prefetch" href="/xfe-document/assets/js/23.7c447b3c.js"><link rel="prefetch" href="/xfe-document/assets/js/24.c6f36d79.js"><link rel="prefetch" href="/xfe-document/assets/js/25.3d7aa596.js"><link rel="prefetch" href="/xfe-document/assets/js/26.ec47fd0a.js"><link rel="prefetch" href="/xfe-document/assets/js/27.7ce53d9f.js"><link rel="prefetch" href="/xfe-document/assets/js/28.7c679b44.js"><link rel="prefetch" href="/xfe-document/assets/js/29.4c0c0091.js"><link rel="prefetch" href="/xfe-document/assets/js/3.5322f14a.js"><link rel="prefetch" href="/xfe-document/assets/js/30.24befa7a.js"><link rel="prefetch" href="/xfe-document/assets/js/31.e565386a.js"><link rel="prefetch" href="/xfe-document/assets/js/32.943e3a76.js"><link rel="prefetch" href="/xfe-document/assets/js/33.529c69b2.js"><link rel="prefetch" href="/xfe-document/assets/js/34.bde65db9.js"><link rel="prefetch" href="/xfe-document/assets/js/35.a46d81f2.js"><link rel="prefetch" href="/xfe-document/assets/js/36.bc05b7f8.js"><link rel="prefetch" href="/xfe-document/assets/js/37.dd963bd3.js"><link rel="prefetch" href="/xfe-document/assets/js/38.01ec9f5c.js"><link rel="prefetch" href="/xfe-document/assets/js/39.8d316d36.js"><link rel="prefetch" href="/xfe-document/assets/js/4.eed64932.js"><link rel="prefetch" href="/xfe-document/assets/js/40.ea4a24b3.js"><link rel="prefetch" href="/xfe-document/assets/js/41.51becd4b.js"><link rel="prefetch" href="/xfe-document/assets/js/42.66bddb93.js"><link rel="prefetch" href="/xfe-document/assets/js/43.7db9d576.js"><link rel="prefetch" href="/xfe-document/assets/js/44.a1972ca5.js"><link rel="prefetch" href="/xfe-document/assets/js/45.5e1185e0.js"><link rel="prefetch" href="/xfe-document/assets/js/46.16fa0ffd.js"><link rel="prefetch" href="/xfe-document/assets/js/47.caa65290.js"><link rel="prefetch" href="/xfe-document/assets/js/48.e0c0661c.js"><link rel="prefetch" href="/xfe-document/assets/js/49.d6e76b75.js"><link rel="prefetch" href="/xfe-document/assets/js/5.f0541060.js"><link rel="prefetch" href="/xfe-document/assets/js/50.c008f7cd.js"><link rel="prefetch" href="/xfe-document/assets/js/52.08239d53.js"><link rel="prefetch" href="/xfe-document/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/xfe-document/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/xfe-document/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/xfe-document/assets/css/0.styles.c01db112.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/xfe-document/" class="home-link router-link-active"><!----> <span class="site-name">XFE DOCUMENT</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/XFETeam/xfe-document" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/XFETeam/xfe-document" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>快速上手掌握</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/start-quickly/repo.html" aria-current="page" class="active sidebar-link">代码管理和发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#项目代码如何获取" class="sidebar-link">项目代码如何获取?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#项目代码如何开发" class="sidebar-link">项目代码如何开发?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#代码如何发布到测试环境-线上灰度环境-线上正式环境" class="sidebar-link">代码如何发布到测试环境/线上灰度环境/线上正式环境?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#如何获取项目对应的发布地址" class="sidebar-link">如何获取项目对应的发布地址?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#项目代码仓库权限没有-过期了-如何申请" class="sidebar-link">项目代码仓库权限没有/过期了, 如何申请?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#项目发布后检查线上是否更新成功" class="sidebar-link">项目发布后检查线上是否更新成功?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#项目发布后资源访问全部错误" class="sidebar-link">项目发布后资源访问全部错误?</a></li><li class="sidebar-sub-header"><a href="/xfe-document/start-quickly/repo.html#gitlab-仓库发布部署流程" class="sidebar-link">Gitlab 仓库发布部署流程</a></li></ul></li><li><a href="/xfe-document/start-quickly/pc-project.html" class="sidebar-link">PC端专题</a></li><li><a href="/xfe-document/start-quickly/mobile-project.html" class="sidebar-link">移动端专题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>通用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/page-standard/st-report.html" class="sidebar-link">StReport埋点上报</a></li><li><a href="/xfe-document/page-standard/common-award-form.html" class="sidebar-link">通用领奖表单</a></li><li><a href="/xfe-document/page-standard/daily-auth.html" class="sidebar-link">剑网3推栏授权</a></li><li><a href="/xfe-document/page-standard/universal-auth.html" class="sidebar-link">剑网3通用授权</a></li><li><a href="/xfe-document/page-standard/xpass.html" class="sidebar-link">xpass弹出窗登录</a></li><li><a href="/xfe-document/page-standard/common-login.html" class="sidebar-link">@xfe/common-login专题通用登录弹窗改版</a></li><li><a href="/xfe-document/page-standard/js-reg-login.html" class="sidebar-link">jQuery登录注册插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>页面规范</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/page-standard/pageHead.html" class="sidebar-link">页面头部</a></li><li><a href="/xfe-document/page-standard/html.html" class="sidebar-link">HTML规范</a></li><li><a href="/xfe-document/page-standard/css.html" class="sidebar-link">CSS规范</a></li><li><a href="/xfe-document/page-standard/image-handle.html" class="sidebar-link">图片处理</a></li><li><a href="/xfe-document/page-standard/note-and-name.html" class="sidebar-link">注释与命名</a></li><li><a href="/xfe-document/page-standard/file-directory.html" class="sidebar-link">文件目录</a></li><li><a href="/xfe-document/page-standard/navibar.html" class="sidebar-link">通用头部</a></li><li><a href="/xfe-document/page-standard/foot.html" class="sidebar-link">通用底部</a></li><li><a href="/xfe-document/page-standard/pc-compatible.html" class="sidebar-link">pc端兼容</a></li><li><a href="/xfe-document/page-standard/mobile-compatible.html" class="sidebar-link">移动端兼容</a></li><li><a href="/xfe-document/page-standard/h5-video-audio.html" class="sidebar-link">移动端H5页面音频/视频规范</a></li><li><a href="/xfe-document/page-standard/mobile-font.html" class="sidebar-link">移动端页面字体使用参考</a></li><li><a href="/xfe-document/page-standard/loading.html" class="sidebar-link">页面 Loading</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/css/css-rule.html" class="sidebar-link">CSS编码规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JAVASCRIPT文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/javascript/javascript-rule.html" class="sidebar-link">Javascript编码规范</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>发布</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/deploy/checklist.html" class="sidebar-link">上线检查列表</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其它文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/xfe-document/other/" class="sidebar-link">Other</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="项目代码如何获取"><a href="#项目代码如何获取" class="header-anchor">#</a> 项目代码如何获取?</h2> <ul><li>代码仓库由产品像内部专题跟进的同学发起, 创建对应的项目仓库, 并提供仓库地址给对应的外包开发同学.</li> <li>如果查看仓库，提示 404 则提醒专题成员给自己添加权限</li></ul> <p><img src="/xfe-document/images/repo-404.jpg" alt="404"></p> <h2 id="项目代码如何开发"><a href="#项目代码如何开发" class="header-anchor">#</a> 项目代码如何开发?</h2> <ul><li>SSG工作流模板开发模式: 直接在初始化成功的模板中进行业务逻辑的补充开发</li> <li>SSG工作流模板使用 yarn 命令安装依赖包，安装失败可能是 node 版本问题，向专题成员求助</li> <li>非工作流的独立开发模式: 将本地的开发代码进行上传到git代码仓库中的develop分支中</li> <li>非工作流本地开发注意检查 html 的 base 属性如果指向发布地址，本地更新不会生效</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://jxgl.xoyo.com/p/m/2021/09/12/website/pc/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="代码如何发布到测试环境-线上灰度环境-线上正式环境"><a href="#代码如何发布到测试环境-线上灰度环境-线上正式环境" class="header-anchor">#</a> 代码如何发布到测试环境/线上灰度环境/线上正式环境?</h2> <ol><li><p>发布上线前, 必须确保代码需要发布的代码包的内容必须 build 文件夹下, 若没有 build 文件夹, 则新建一个 build 文件夹并将核心移动到 build 文件夹中 ,文件结构参考如下:</p> <ol><li>有单独编译后的代码包</li></ol> <p><img src="/xfe-document/images/repo-build.png" alt="build"></p> <ol start="2"><li>源码包直接发布上线</li></ol> <p><img src="/xfe-document/images/repo-ver.png" alt="ver"></p></li> <li><p>发布时, 确定当前需要发布到对应的环境, 进行合并请求发起</p> <p>针对目前专题的三种环境进行说明解释:</p> <ol><li>测试环境: 将develop分支的代码发布合并到test, 开发者可以自己合并发布</li> <li>线上灰度测试: 将develop分支的代码发布合并到master, 必须要在和跟进的内部研发同学确定项目灰度测试发布的地址, 然后, 调整完代码中相关的地址信息后, 进行合并发起, 并由内部研发的同学进行审核和合并.</li> <li>线上正式环境:  将develop分支的代码发布合并到master, 发起合并后, 由跟进的内部研发同学进行审核和合并.</li></ol></li></ol> <h2 id="如何获取项目对应的发布地址"><a href="#如何获取项目对应的发布地址" class="header-anchor">#</a> 如何获取项目对应的发布地址?</h2> <p>项目的发布地址可以通过仓库名称的特定格式来进行获取, 项目的名称默认格式为:
项目站点/p/设备类型/发布上线日期/项目名称  如: activity.xoyo.com_p_m_2023_xx_xx_demo</p> <p>下面的解释以当前demo为例</p> <ul><li><p>测试环境:
测试环境区分国内和海外两条服务器, 因此对应的测试站点有区别. 通用格式为: 测试站点/项目站点/p/设备类型/发布上线日期/项目名称</p> <ol><li><p>国内: 测试站点为: test-zt.xoyo.com 上述demo的测试地址为:  https://test-zt.xoyo.com/activity.xoyo.com/p/m/2023/xx/xx/demo/index.html</p></li> <li><p>海外: 测试站点为: test-zt.xoyo.games  上述demo的测试地址为: https://test-zt.xoyo.games/activity.xoyo.com/p/m/2023/xx/xx/demo/index.html</p></li></ol></li> <li><p>正式环境:
正式环境不管国内还是海外都以当前站点为准.
上述的demo的正式地址为:  https://activity.xoyo.com/p/m/2023/xx/xx/demo/index.html</p></li></ul> <h2 id="项目代码仓库权限没有-过期了-如何申请"><a href="#项目代码仓库权限没有-过期了-如何申请" class="header-anchor">#</a> 项目代码仓库权限没有/过期了, 如何申请?</h2> <p>项目需要指定特定的同学进行开发, 如果出现临时增加新的开发同学, 而且出现了需要补充仓库权限时 , 则需要向对应的项目产品跟进的同学去申请资源, 并按照正常的流程接入来进行资格的申请.
权限申请请联系@徐玮玮(xuweiwei1)</p> <h2 id="项目发布后检查线上是否更新成功"><a href="#项目发布后检查线上是否更新成功" class="header-anchor">#</a> 项目发布后检查线上是否更新成功?</h2> <p>项目发布后线上没有更新成功的可能有以下几种情况:</p> <ol><li><p>用户页面本身的缓存, 请强刷页面或者url加hash参数强刷页面验收</p></li> <li><p>项目发布CI的流水还没有执行完, 检查当前发布合并的CI情况. 等CI通过后再重新进行验收</p></li></ol> <p><img src="/xfe-document/images/repo-success.png" alt="success"></p> <ol start="3"><li>页面有base指向, 如某些页面会有特定的短链进行访问, 因此项目发布后长链更新了, 短链没有及时更新, 因此需要等待15分钟的缓存时间或者通过项目对应的需求产品/跟进的内部研发同学进行手动CDN的刷新.</li></ol> <h2 id="项目发布后资源访问全部错误"><a href="#项目发布后资源访问全部错误" class="header-anchor">#</a> 项目发布后资源访问全部错误?</h2> <p>项目发布后出现了资源的路劲调用全部错误, 一般出现这种场景的可能为以下集中情况:</p> <ol><li>调用的资源全部都为站点根节点, 类似情况如下:</li></ol> <p><img src="/xfe-document/images/repo-error.png" alt="error"></p> <p>但是实际资源调用的路劲为: https://test-zt.xoyo.games/xxxx.com/p/xxxx/xx/xx/xxxxxxx/static/xxxxxx.js 确保资源调用的路径是否正确.</p> <blockquote><p>注意: vue 等默认模板 host 都是 / , 但这样会访问根路径, 请自行改为相对路径!</p></blockquote> <h2 id="gitlab-仓库发布部署流程"><a href="#gitlab-仓库发布部署流程" class="header-anchor">#</a> Gitlab 仓库发布部署流程</h2> <p><a href="https://d7n9vj8ces.feishu.cn/docx/doxcnohILWEa5AgyvgiwuJbK0qf" target="_blank" rel="noopener noreferrer">gitlab仓库发布部署流程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/XFETeam/xfe-document/edit/master/docs/start-quickly/repo.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/xfe-document/start-quickly/pc-project.html">
        PC端专题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/xfe-document/assets/js/app.bdf91f9c.js" defer></script><script src="/xfe-document/assets/js/2.3dc1b8de.js" defer></script><script src="/xfe-document/assets/js/1.7f771cfb.js" defer></script><script src="/xfe-document/assets/js/51.ae867302.js" defer></script>
  </body>
</html>
